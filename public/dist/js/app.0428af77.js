(function(e){function t(t){for(var o,s,i=t[0],n=t[1],c=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);u&&u(t);while(m.length)m.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],o=!0,i=1;i<a.length;i++){var n=a[i];0!==r[n]&&(o=!1)}o&&(l.splice(t--,1),e=s(s.s=a[0]))}return e}var o={},r={app:0},l=[];function s(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=o,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(a,o,function(t){return e[t]}.bind(null,o));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],n=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=n;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0c48":function(e,t,a){e.exports=a.p+"img/a3bb004f664105c88d331258b4f9308.c92a9275.png"},1:function(e,t){},1905:function(e,t,a){"use strict";var o=a("ee3f"),r=a.n(o);r.a},"2e70":function(e,t,a){},4278:function(e,t,a){"use strict";var o=a("fdec"),r=a.n(o);r.a},4348:function(e,t,a){"use strict";var o=a("77e5"),r=a.n(o);r.a},"52fd":function(e,t,a){"use strict";var o=a("db18"),r=a.n(o);r.a},"561a":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var o={};a.r(o),a.d(o,"user",(function(){return ve}));var r={};a.r(r),a.d(r,"format",(function(){return $e}));var l=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("keep-alive",[e.$route.meta.keepAlive?a("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():a("router-view")],1)},i=[],n={data(){return{}},created(){},components:{},beforeRouteEnter(e,t,a){}},c=n,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,null,null),m=d.exports,p=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"login"},[a("div",{staticClass:"home"},[e._m(0),a("div",{staticClass:"r"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"top"}},[a("el-form-item",{attrs:{label:"管理员账号"}},[a("el-input",{attrs:{placeholder:"请输入管理员账号"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{staticClass:"mt50"},[a("el-button",{staticClass:"w100",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")])],1)],1)],1)])])},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"l"},[a("div",{staticClass:"mask"},[a("p",{staticClass:"p"},[e._v("众驰通教育科技")]),a("p",{staticClass:"mt20 cejs"},[e._v("OA系统管理中心")])])])}],g={data(){return{form:{username:"",password:""}}},created(){},comments:{},mounted(){},methods:{onSubmit(){this.post("/login/admin",this.form).then(e=>{console.log(e),e&&(this.setItem("token",e.token),this.setItem("user_name",e.user.username),this.setItem("user_id",e.user.id),this.setItem("user_realName",e.user.realName),this.hf("/home"))})},async getList(){let e=await this.get("/users",{phone:"1"});console.log(e)}},updated(){}},v=g,b=(a("1905"),Object(u["a"])(v,h,f,!1,null,"7fcb1fb8",null)),y=b.exports,w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"home"},[o("el-container",{style:{height:e.window_height+"px"}},[o("el-container",[o("el-aside",{attrs:{width:"200px"}},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#30343f","text-color":"#fff","active-text-color":"#ffd04b",router:"","default-active":e.currentRoute},on:{open:e.handleOpen,close:e.handleClose}},[o("div",{staticClass:"logo"},[o("img",{attrs:{src:a("0c48"),alt:""}})]),o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-video-camera-solid"}),o("span",[e._v("视频管理")])]),o("el-menu-item-group",[o("el-menu-item",{attrs:{index:"video"}},[e._v("视频列表")])],1),o("el-menu-item-group",[o("el-menu-item",{attrs:{index:"video_type"}},[e._v("视频分类")])],1)],2),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-user-solid"}),o("span",[e._v("人员管理")])]),o("el-menu-item-group",[o("el-menu-item",{attrs:{index:"admin"}},[e._v("管理员")]),o("el-menu-item",{attrs:{index:"user"}},[e._v("用户")])],1)],2)],1)],1),o("el-main",{style:{height:e.window_height+"px"}},[o("el-header",{staticClass:"header"},[o("el-page-header",{attrs:{content:e.$route.name},on:{back:function(t){return e.$router.go(-1)}}}),o("div",{},[o("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[o("span",{staticClass:"el-dropdown-link flex flex_align_center"},[o("el-link",{staticClass:"mr20",attrs:{type:"primary"}},[e._v(e._s(e.getItem("user_realName")))]),o("el-avatar",{attrs:{size:"medium",src:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png"}})],1),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"err"}},[e._v("退出登录")])],1)],1)],1)],1),o("section",{staticStyle:{padding:"10px 20px","overflow-y":"auto"},style:{height:e.window_height-80+"px"}},[o("router-view")],1)],1)],1)],1)],1)},_=[],x={data(){return{window_height:"",title:"",currentRoute:""}},created(){this.window_height=this.getViewportSize().height,console.log(this.$route)},mounted(){this.currentRoute=this.$route.path.split("/")[2],console.log(this.currentRoute)},methods:{handleCommand(e){"err"==e&&(this.removeItem(),this.hf("/login"))},goBack(){console.log("go back"),this.$router.go(-1)},handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)}},updated(){},beforeRouteUpdate(e,t,a){this.title=e.name,a()}},k=x,$=(a("80de"),Object(u["a"])(k,w,_,!1,null,"529e3b7c",null)),C=$.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"z-user"},[a("header",[a("el-cascader",{staticClass:"mr20",attrs:{clearable:"",placeholder:"区域查询",size:"large",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),a("el-input",{staticStyle:{width:"222px"},attrs:{placeholder:"手机号查询"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("el-button",{staticClass:"ml20",attrs:{type:"primary"},on:{click:e.onQuery}},[e._v("查询")]),a("el-button",{staticClass:"ml20",attrs:{type:"success"},on:{click:e.addUser}},[e._v("添加用户")]),a("el-tag",{staticClass:"ml20"},[e._v(e._s(e.total))])],1),a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"max-height":"800px",data:e.tableData,stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"areaName",label:"所在区域",width:"230"}}),a("el-table-column",{attrs:{prop:"name",label:"用户名",width:"180"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"180"}}),a("el-table-column",{attrs:{prop:"introduce",label:"简介"}}),a("el-table-column",{attrs:{prop:"registeredDate",sortable:"",label:"注册时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editUser(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t\t编辑\n\t\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.initialization(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t\t密码重置\n\t\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t\t移除\n\t\t\t\t\t")])]}}])})],1),a("div",{staticClass:"block mt20 tr"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total},on:{"current-change":e.changeCurr}})],1)],1)},O=[],S=a("ef6c"),D={data(){return{table_height:"",currentPage3:0,tableData:[],phone:"",total:0,dialogFormVisible:!1,count:10,loading:!1,noMore:!1,area:"",options:S["regionDataPlus"],selectedOptions:[]}},created(){this.table_height=this.getViewportSize().height-155+"px",this.getUserList(1)},mounted(){console.log(this.$refs.table.$el)},methods:{handleChange(e){console.log(e),this.area=JSON.stringify(e)},indexMethod(e){return e+1},changeCurr(e){console.log(e),this.getUserList(e)},addUser(){this.hf("/home/adduser")},onQuery(){this.getUserList()},initialization(e,t){this.$confirm("重置密码后，默认密码为 123456 确定要初始化？","重置密码",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.get("/users/initialization/"+t[e].id).then(a=>{200==a.code&&this.$message({message:`恭喜【 ${t[e].name} 】密码重置成功`,type:"success"})})}).catch(()=>{console.log("已取消删除")})},editUser(e,t){console.log(t[e]),this.hf("/home/adduser",t[e].id)},deleteRow(e,t){console.log(t[e]),this.$confirm("将永久删除此用户，确定要删除？","删除用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.delete("/users/userdelete/"+t[e].id).then(e=>{console.log(e),200==e.code&&(this.getUserList(1),this.$message({message:"删除成功",type:"success"}))})}).catch(()=>{console.log("已取消删除")})},async getUserList(e,t){let a=await this.get("/users",{page:e,count:this.count,phone:this.phone,area:this.area});if(console.log(a),a){let e=a.data;this.tableData=e.list,this.total=e.total}},handleCurrentChange(e){console.log("当前页: "+e),this.getUserList(e)},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.form["birthday"]=this.rTime(this.form.registeredDate),this.post("/users/adduser",this.form).then(e=>{console.log(e),200==e.code&&(this.$message({message:"添加成功",type:"success"}),this.dialogFormVisible=!1)})})},rTime(e){var t=new Date(e).toJSON();return new Date(new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}}},U=D,F=(a("8d67"),Object(u["a"])(U,T,O,!1,null,"a77d425e",null)),V=F.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addUser"},[a("el-form",{ref:"ruleForm",staticClass:"pt20 pl30 pr30 demo-ruleForm",attrs:{rules:e.rules,model:e.form,"label-position":"top","label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","http-request":e.httpRequest1,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.head_img?a("img",{staticClass:"avatar",attrs:{src:e.form.head_img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-divider"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{maxlength:"11",placeholder:"请输入"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生日："}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1)],1),a("el-divider"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所在地区：",prop:"area"}},[a("el-cascader",{attrs:{size:"large",options:e.options},on:{change:e.handleChange},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"真实姓名："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职位："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"行业："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.industry,callback:function(t){e.$set(e.form,"industry",t)},expression:"form.industry"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学历"}},[a("el-input",{attrs:{placeholder:"请输入 "},model:{value:e.form.record,callback:function(t){e.$set(e.form,"record",t)},expression:"form.record"}})],1)],1),a("el-col",{attrs:{span:12,prop:"email"}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),a("el-form-item",{staticClass:"introduce",attrs:{label:"简介："}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.hf("/home/user")}}},[e._v("取消")])],1)],1)],1)},A=[],q={data(){var e=(e,t,a)=>t?/^1[3456789]\d{9}$/.test(t)?void a():a(new Error("手机号码有误，请重填")):a(new Error("手机号不能为空"));return{options:S["regionData"],imageUrl:"",table_height:"",form:{name:"",phone:"",area:"",sex:"1",email:"",head_img:"",birthday:"",introduce:"",introduce:"",realName:"",position:"",industry:"",company:"",record:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}],head_img:[{required:!0,message:"请选择用户头像",trigger:"change"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],area:[{required:!0,message:"请选择用户所在区域",trigger:["blur","change"]}]}}},created(){console.log(void 0!=this.$route.query.id),void 0!=this.$route.query.id&&this.get("/users/getUserInformation/"+this.$route.query.id).then(e=>{console.log(e);let t=e.data;for(let a in t)this.form[a]=t[a];this.form["sex"]="1"==this.form.sex?"男":"女",null!=this.form.area&&(this.form["area"]=JSON.parse(this.form.area))})},methods:{handleChange(e){console.log(e),console.log(S["CodeToText"][e[0]]),console.log(S["CodeToText"][e[1]]),console.log(S["CodeToText"][e[2]])},submitForm(e){console.log("submit!"),this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;this.form["sex"]="男"==this.form.sex?"1":"0",this.form["area"]=JSON.stringify(this.form.area),console.log(this.form["area"]),void 0!=this.$route.query.id?(this.form["id"]=this.$route.query.id,this.post("/users/edituser",this.form,2).then(e=>{console.log(e),200==e.code?(this.$message({message:`恭喜你，编辑【 ${this.form.name} 】成功`,type:"success"}),this.hf("/home/user")):(this.$message.error(e.msg),this.form["area"]=JSON.parse(this.form.area))})):this.post("/users/adduser",this.form).then(e=>{console.log("新增"),console.log(e),200==e.code?(this.$message({message:`恭喜你，添加【 ${this.form.name} 】成功`,type:"success"}),this.hf("/home/user")):(this.$message.error(e.msg),this.form["area"]=JSON.parse(this.form.area))})})},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},httpRequest1(e,t){console.log(t);let a=this,o=new FileReader,r=e.file;o.readAsDataURL(r),o.onloadend=function(e){a.form.head_img=this.result}}}},R=q,I=(a("6972"),Object(u["a"])(R,j,A,!1,null,"3b272586",null)),E=I.exports,z=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},M=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",[e._v("\n\t\t123\n\t")])])}],N={},L=N,B=(a("52fd"),Object(u["a"])(L,z,M,!1,null,"899fd3e4",null)),J=B.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"z-video"},[a("header",{staticClass:"mt20"},[a("span",{staticClass:"demonstration"},[e._v("发布时间")]),a("el-date-picker",{staticClass:"ml20 mr20",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),a("span",{staticClass:"demonstration mr20"},[e._v("类型")]),a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.file_class,callback:function(t){e.file_class=t},expression:"file_class"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.video_type,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2),a("span",{staticClass:"demonstration mr20 ml20"},[e._v("状态")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticClass:"ml20",attrs:{type:"primary"},on:{click:e.onQuery}},[e._v("查询")]),a("el-button",{staticClass:"ml20",attrs:{type:"success"},on:{click:e.addView}},[e._v("添加视频")]),a("el-tag",{staticClass:"ml20"},[e._v(e._s(e.total))])],1),a("el-table",{ref:"table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"title",label:"封面",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cover"},[a("i",{staticClass:"el-icon-video-play",on:{click:function(a){return e.playView(t.$index,e.tableData)}}}),a("img",{attrs:{src:t.row.coverBase}})])]}}])}),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"230"}}),a("el-table-column",{attrs:{prop:"introduction",label:"简介"}}),a("el-table-column",{attrs:{prop:"releaseTime",label:"发布时间",width:"180",sortable:""}}),a("el-table-column",{attrs:{prop:"volume",label:"播放量(次)",width:"110",align:"center",sortable:""}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("VideoType")(t.row.type)))])]}}])}),a("el-table-column",{attrs:{prop:"shelf",label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.shelf?a("span",{staticStyle:{color:"#67C23A"}},[e._v("启用")]):a("span",{staticStyle:{color:"red"}},[e._v("禁用")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.shelf?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.Enable(t.$index,e.tableData,1)}}},[e._v("\n\t\t\t\t\t启用\n\t\t\t\t")]):e._e(),"1"==t.row.shelf?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.Enable(t.$index,e.tableData,0)}}},[e._v("\n\t\t\t\t\t禁用\n\t\t\t\t")]):e._e(),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editUser(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t编辑\n\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t移除\n\t\t\t\t")])]}}])})],1),a("div",{staticClass:"block mt20 tr"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total},on:{"current-change":e.changeCurr}})],1),a("el-dialog",{attrs:{title:"视频审核","destroy-on-close":"",visible:e.dialogVisible,width:"60%",top:"10vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}})],1)],1)},H=[],Q={data(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick(e){const t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},dialogVisible:!1,dialogVisible1:!1,options:[{value:"",label:"全部"},{value:"1",label:"启用"},{value:"0",label:"禁用"}],state:"",value1:[],tableData:[],total:0,video_type:[],file_class:""}},mounted(){window.that=this},created(){this.getViewList(),this.getAllvideoType()},filters:{VideoType(e){let t="";for(let a in that.video_type)e==that.video_type[a].id&&(t=that.video_type[a].name);return""==t?"暂无":t}},methods:{Enable(e,t,a){console.log(t[e]),console.log(a),this.post("/view/isenable",{id:t[e].id,states:a}).then(t=>{console.log(t),this.tableData[e].shelf=a})},async getAllvideoType(){let e=await this.get("videoType/getAllvideoType");if(console.log(e),e){let t=e.data;this.video_type=t}},onQuery(){this.getViewList()},addView(){this.hf("/home/addview")},editUser(e,t){console.log(t[e]),this.hf("/home/addview",t[e].id)},deleteRow(e,t){console.log(t[e]),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.delete("/view/deleteVideo/"+t[e].id,{file_type:t[e].file_type,viewFileUrl:t[e].viewFileUrl.split("/")[2]}).then(e=>{200==e.code&&(this.$message({type:"success",message:"删除成功!"}),this.getViewList())})})},changeCurr(e){console.log(e),this.page=e,this.getViewList()},playView(e,t){console.log(t[e]);let a=t[e];1==a.file_type?(this.playerOptions.sources[0].src=a.viewFileUrl,this.playerOptions.poster=a.coverBase):(this.playerOptions.sources[0].src=this.http+a.viewFileUrl,this.playerOptions.poster=a.coverBase),console.log(this.playerOptions.sources[0].src),this.dialogVisible=!0},indexMethod(e){return e+1},async getViewList(){let e,t="";null!=this.value1?(e=this.value1[0],t=this.value1[1]):t="";let a=await this.get("/view/getViewList",{page:this.page,count:10,state:this.state,startTiem:e,endTiem:t,type:this.file_class});if(a){console.log(a);let e=a.data;this.tableData=e,this.total=a.total}}}},W=Q,G=(a("4278"),Object(u["a"])(W,P,H,!1,null,"585f5c6e",null)),Y=G.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addView"},[a("el-form",{ref:"ruleForm",staticClass:"pt20 pl30 pr30 demo-ruleForm",attrs:{rules:e.rules,model:e.form,"label-position":"top","label-width":"120px"}},[a("el-form-item",{attrs:{label:"视频封面"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":e.beforeAvatarUpload,action:"#","http-request":e.httpRequest1,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.form.coverBase?a("img",{staticClass:"avatar",attrs:{src:e.form.coverBase}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-divider"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上传视频"}},[a("div",[a("el-radio",{attrs:{label:"1"},model:{value:e.form.file_type,callback:function(t){e.$set(e.form,"file_type",t)},expression:"form.file_type"}},[e._v("在线地址")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.file_type,callback:function(t){e.$set(e.form,"file_type",t)},expression:"form.file_type"}},[e._v("本地视频上传")])],1),a("div",{staticClass:"mt20"},[1==e.form.file_type?a("el-input",{attrs:{placeholder:"请输入视频地址"},model:{value:e.form.viewFileUrl,callback:function(t){e.$set(e.form,"viewFileUrl",t)},expression:"form.viewFileUrl"}}):e._e(),2==e.form.file_type?a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",name:"file",action:e.http+"uploadFile",limit:1,headers:{authorization:"Bearer "+e.getItem("token")},data:{type:"video"},"before-upload":e.beforeUpload,"on-exceed":e.handleExceed,"on-success":e.onSuccess}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 mp4 文件")])]):e._e()],1)])],1)],1),a("el-divider"),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"视频类型"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.video_type,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-form-item",{attrs:{label:"简介"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),a("el-form-item",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.hf("/home/video")}}},[e._v("取消")])],1)],1)],1)},K=[],X={data(){return{imageUrl:"",table_height:"",form:{title:"",coverBase:"",file_type:"1",viewFileUrl:"",introduction:"",type:""},video_type:"",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}],phone:[],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],area:[{required:!0,message:"请选择用户所在区域",trigger:["blur","change"]}]}}},created(){void 0!=this.$route.query.id&&this.get("/view/getVideoInformation/"+this.$route.query.id).then(e=>{if(console.log(e),e){let t=e.data;console.log(t);for(let e in t)this.form[e]=t[e];this.form.file_type=String(this.form.file_type)}}),this.getAllvideoType()},methods:{async getAllvideoType(){let e=await this.get("videoType/getAllvideoType");if(console.log(e),e){let t=e.data;this.video_type=t}},handleChange(e){console.log(e),console.log(CodeToText[e[0]]),console.log(CodeToText[e[1]]),console.log(CodeToText[e[2]])},submitForm(e){console.log("submit!"),this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;void 0!=this.$route.query.id?(this.form["id"]=this.$route.query.id,this.post("view/editVideoInformation",this.form,2).then(e=>{if(console.log(e),200==e.code){let t=e.data;console.log(t),this.$message({message:`恭喜你，编辑【 ${this.form.title} 】成功`,type:"success"}),this.hf("/home/video")}})):this.post("/view/addView",this.form).then(e=>{console.log(e),e&&(this.$message({message:`恭喜你，发布【 ${this.form.title} 】成功`,type:"success"}),this.hf("/home/video"))})})},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return console.log(a),t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},httpRequest1(e){let t=this,a=new FileReader,o=e.file;a.readAsDataURL(o),a.onloadend=function(e){t.compressImg(e.currentTarget.result,500,.7).then(e=>{t.form.coverBase=e})}},onSuccess(e){console.log(e),200==e.code&&(this.form.viewFileUrl=e.data.url)},beforeUpload(e){console.log(e);var t=e.name.substring(e.name.lastIndexOf(".")+1);const a="mp4"===t;return a||this.$message({message:"上传文件只能是 mp4 格式!",type:"warning"}),a},handleExceed(e,t){this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},compressImg(e,t,a){var o,r,l=function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1];return a},s=new Image,i=new Promise(e=>s.onload=e);return s.src=e,i.then(()=>{o=s.width,r=s.height;var i=document.createElement("canvas"),n=i.getContext("2d");Math.max(o,r)>t?o>r?(i.width=t,i.height=t*r/o):(i.height=t,i.width=t*o/r):(i.width=o,i.height=r),n.clearRect(0,0,i.width,i.height),n.drawImage(s,0,0,i.width,i.height);var c=i.toDataURL(l(e),a);return c})}}},ee=X,te=(a("4348"),Object(u["a"])(ee,Z,K,!1,null,"4fcc5dd6",null)),ae=te.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"video_type"},[a("header",{staticClass:"mt20"},[a("el-button",{staticClass:"ml20",attrs:{type:"success"},on:{click:e.addView}},[e._v("添加分类")])],1),a("el-table",{ref:"table",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"max-height":"800px",stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"name",label:"标题",width:"300"}}),a("el-table-column",{attrs:{prop:"establishTime",label:"创建时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.editUser(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t编辑\n\t\t\t\t")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v("\n\t\t\t\t\t移除\n\t\t\t\t")])]}}])})],1),a("el-dialog",{attrs:{title:0==e.title_index?"添加视频类":"编辑视频类型","destroy-on-close":"",visible:e.dialogVisible,width:"30%",top:"10vh"},on:{close:function(t){e.ruleForm.name=""},"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类型名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},re=[],le={data(){return{tableData:[],dialogVisible:!1,ruleForm:{name:""},rules:{name:[{required:!0,message:"请输入视频类型",trigger:"blur"},{min:2,max:6,message:"长度在 2 到 6 个字符",trigger:"blur"}]},title_index:0}},created(){},mounted(){this.getAllvideoType()},methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;0==this.title_index?this.post("videoType/addVideoType",{name:this.ruleForm.name}).then(e=>{e&&(this.$message({message:`恭喜你，添加 【${this.ruleForm.name}】 类型成功`,type:"success"}),this.ruleForm.name="",this.dialogVisible=!1,this.getAllvideoType())}):this.post("videoType/editVideoType",{name:this.ruleForm.name,id:this.title_index}).then(e=>{e&&(this.$message({message:`恭喜你，编辑 【${this.ruleForm.name}】 类型成功`,type:"success"}),this.ruleForm.name="",this.dialogVisible=!1,this.getAllvideoType())})})},indexMethod(e){return e+1},async getAllvideoType(){let e=await this.get("videoType/getAllvideoType");if(console.log(e),e){let t=e.data;this.tableData=t}},editUser(e,t){console.log(t[e]),this.title_index=t[e].id,this.dialogVisible=!0,this.ruleForm.name=t[e].name},deleteRow(e,t){console.log(t[e]),this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.delete("videoType/deleteVideoType/"+t[e].id).then(a=>{this.$message({message:`恭喜你，删除 【${t[e].name}】成功`,type:"success"}),this.getAllvideoType()})})},addView(){this.title_index=0,this.dialogVisible=!0}},updated(){}},se=le,ie=(a("802f"),Object(u["a"])(se,oe,re,!1,null,"31d4e54b",null)),ne=ie.exports;const ce=[{path:"/home",name:"首页",component:C,redirect:"/home/video",meta:{keepAlive:!0,requiresAuth:!0},children:[{path:"user",name:"用户管理",component:V,meta:{requiresAuth:!1}},{path:"adduser",name:"操作用户",component:E},{path:"admin",name:"管理员",component:J,meta:{requiresAuth:!1}},{path:"video",name:"视频管理",component:Y,meta:{requiresAuth:!1}},{path:"addview",name:"操作视频",component:ae,meta:{requiresAuth:!1}},{path:"video_type",name:"视频分类",component:ne,meta:{requiresAuth:!1}}]}];var ue=ce;l["default"].use(p["a"]);const de=[{path:"/",redirect:"/login"},{path:"/login",name:"登录",component:y},...ue],me=new p["a"]({mode:"history",routes:de});var pe=me,he=a("2f62");const fe={user:JSON.parse(window.localStorage.getItem("user"))||[]};var ge=fe;const ve=e=>e.user,be="SET_USER",ye={[be](e,t){localStorage.setItem("user",JSON.stringify(t)),e.user=t}};var we=ye;l["default"].use(he["a"]);var _e=new he["a"].Store({state:ge,getters:o,mutations:we}),xe=a("5c96"),ke=a.n(xe);a("0fae"),a("c269");function $e(e){var t=new Date(Number(e));return t.toLocaleDateString().replace(/\//g,"-")+" "+t.toTimeString().substr(0,8)}var Ce={install(e,t){e.prototype.setItem=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},e.prototype.getItem=function(e){return JSON.parse(window.localStorage.getItem(e)||"[]")},e.prototype.removeItem=function(){window.localStorage.clear()},e.prototype.TheremoveItem=function(e){Object.keys(localStorage).forEach(e=>{"themeColor"!=e&&localStorage.removeItem(e)})},e.prototype.getViewportSize=function(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},e.prototype.hf=function(e,t){console.log(e),ze.$router.push({path:e,query:{id:JSON.stringify(t)}})},e.prototype.getDate=function(e=new Date){var t,a=e,o=a.getFullYear(),r=a.getMonth(),l=a.getDate(),s=a.getDay(),i=a.getHours(),n=a.getMinutes(),c=a.getSeconds(),u=a.getMilliseconds();r+=1,r<10&&(r="0"+r),l<10&&(l="0"+l),i<10&&(i="0"+i),n<10&&(n="0"+n),c<10&&(c="0"+c),u<100&&(u="0"+u);var d=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六");t=d[s];var m="",p="";return m=o+"."+r+"."+l+" "+i+":"+n,p=o+"-"+r+"-"+l+" "+i+":"+n+":"+c,{week:t,time:m,items:p}}}},Te=a("bc3a"),Oe=a.n(Te),Se=a("4328"),De=a.n(Se);const Ue={pro:"https://doctor.mipmci.com/zuul/api/",dev:"http://39.100.122.13:3000/api/",util:"http://127.0.0.1:3000/api/"},Fe=location.hostname;let Ve="";for(let Me in Ue){let e=Ue[Me];e.indexOf(Fe)>-1&&(Ve=e)}Ve||(Ve=Ue.util?Ue.util:Ue.dev);const je=Oe.a.create({baseURL:Ve,timeout:5e3});je.interceptors.request.use(e=>{let t="application/x-www-form-urlencoded",a=JSON.stringify(e.headers["Content-Type"])==JSON.stringify(t)?De.a.stringify({...e.data}):{...e.data};return"post"===e.method?e.data=a:e.params={...e.params},ze.getItem("token")&&(e.headers["authorization"]="Bearer "+ze.getItem("token")),e},e=>{Object(xe["Message"])("请求错误"),Promise.reject(e)}),je.interceptors.response.use(e=>{let t=e.data.code;return console.log(t),"200"==t?e.data:(ze.$message.error(e.data.msg),!1)},e=>{console.log(e),console.log("error"),ze.hf("/login"),Object(xe["Message"])("管理员信息已过期，请重新登录")});var Ae={service:je,DOMIN:Ve},qe={install(e){e.prototype.http=Ae.DOMIN,e.prototype.post=function(e,t,a=1){let o=new Object;switch(a){case 1:o={"Content-Type":"application/x-www-form-urlencoded"};break;case 2:o={"Content-Type":"application/json;charset=UTF-8"};break;case 3:o={"Content-Type":"application/json"};break;default:break}return Ae.service({url:e,method:"post",headers:o,data:t})},e.prototype.get=function(e,t){return Ae.service({url:e,method:"get",params:t})},e.prototype.delete=function(e,t){return Ae.service({url:e,method:"delete",params:t})},e.prototype.put=function(e,t,a=1){let o=new Object;switch(a){case 1:o={"Content-Type":"application/x-www-form-urlencoded"};break;case 2:o={"Content-Type":"application/json;charset=UTF-8"};break;case 3:o={"Content-Type":"application/json"};break;default:break}return Ae.service({url:e,method:"put",headers:o,data:t})}}},Re=a("d6d3"),Ie=a.n(Re);a("fda2"),a("451f"),Object.keys(r).forEach(e=>{l["default"].filter(e,r[e])}),l["default"].use(Ce),l["default"].use(qe),l["default"].use(ke.a),l["default"].use(Ie.a),pe.beforeEach((e,t,a)=>{e.matched.some(e=>e.meta.requiresAuth)?(console.log(localStorage.token),console.log("undefined"==localStorage.token),"undefined"==localStorage.token?a({path:"/login",query:{redirect:e.fullPath}}):a()):a()});var Ee=new l["default"]({router:pe,store:_e,render:e=>e(m)}).$mount("#app"),ze=t["default"]=Ee},6972:function(e,t,a){"use strict";var o=a("2e70"),r=a.n(o);r.a},"77e5":function(e,t,a){},"802f":function(e,t,a){"use strict";var o=a("b138"),r=a.n(o);r.a},"80de":function(e,t,a){"use strict";var o=a("561a"),r=a.n(o);r.a},"8d67":function(e,t,a){"use strict";var o=a("da9b"),r=a.n(o);r.a},b138:function(e,t,a){},c269:function(e,t,a){},da9b:function(e,t,a){},db18:function(e,t,a){},ee3f:function(e,t,a){},fdec:function(e,t,a){}});
//# sourceMappingURL=app.0428af77.js.map